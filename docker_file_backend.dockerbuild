FROM python:3.10


WORKDIR /
COPY requirements.txt .
RUN apt-get update -y
RUN apt-get install -y clang build-essential cmake mercurial
RUN pip install --upgrade pip
RUN pip install cython

# RUN pip install git+https://github.com/clab/dynet#egg=dynet
RUN pip install --no-cache-dir -r requirements.txt
RUN mkdir app
COPY . app
CMD ["gunicorn", "-w 4", "-b 0.0.0.0:8001", "app.app:app"]
EXPOSE 8001